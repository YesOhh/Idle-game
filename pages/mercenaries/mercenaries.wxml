<!-- pages/mercenaries/mercenaries.wxml -->
<view class="mercenaries-container">
  <view class="header">
    <view class="header-title">ä½£å…µç®¡ç†</view>
    <view class="header-gold">ğŸ’° {{goldText}}</view>
  </view>
  
  <view class="mercenaries-list">
    <view wx:for="{{mercenaries}}" wx:key="id" class="mercenary-card pixel-card">
      <view class="merc-header">
        <view class="merc-icon">{{item.icon}}</view>
        <view class="merc-info">
          <view class="merc-name">{{item.name}}</view>
          <view class="merc-desc">{{item.description}}</view>
        </view>
      </view>
      
      <view class="pixel-divider"></view>
      
      <view class="merc-stats">
        <view class="stat-row">
          <text class="stat-label">çŠ¶æ€:</text>
          <text class="stat-value {{item.recruited ? 'text-success' : 'text-muted'}}">
            {{item.recruited ? 'å·²é›‡ä½£' : 'æœªé›‡ä½£'}}
          </text>
        </view>
        
        <view wx:if="{{item.recruited}}" class="stat-row">
          <text class="stat-label">æ”»å‡»åŠ›:</text>
          <text class="stat-value">{{item.currentDamage}} (Lv.{{item.damageLevel}})</text>
        </view>
        <view wx:else class="stat-row">
          <text class="stat-label">åŸºç¡€ä¼¤å®³:</text>
          <text class="stat-value">{{item.damage}}</text>
        </view>

        <view wx:if="{{item.recruited}}" class="stat-row">
          <text class="stat-label">æ”»å‡»é—´éš”:</text>
          <text class="stat-value">{{item.currentInterval}}ç§’ (Lv.{{item.intervalLevel}})</text>
        </view>
        <view wx:else class="stat-row">
          <text class="stat-label">æ”»å‡»é—´éš”:</text>
          <text class="stat-value">{{item.attackInterval}}ç§’</text>
        </view>

        <view class="stat-row">
          <text class="stat-label">æ€»DPS:</text>
          <text class="stat-value text-success">{{item.dpsText}}</text>
        </view>
      </view>
      
      <!-- æœªé›‡ä½£æ—¶æ˜¾ç¤ºæ‹›å‹ŸæŒ‰é’® -->
      <button 
        wx:if="{{!item.recruited}}"
        class="pixel-button {{item.canAffordRecruit ? '' : 'disabled'}}" 
        bindtap="onRecruitMercenary" 
        data-id="{{item.id}}"
        disabled="{{!item.canAffordRecruit}}">
        æ‹›å‹Ÿ ({{item.recruitCostText}})
      </button>

      <!-- å·²é›‡ä½£æ—¶æ˜¾ç¤ºå‡çº§æŒ‰é’® -->
      <view wx:if="{{item.recruited}}" class="upgrade-buttons" style="display: flex; gap: 10rpx; margin-top: 10rpx;">
        <button 
          class="pixel-button small {{item.canAffordDamage ? '' : 'disabled'}}" 
          bindtap="onUpgradeDamage" 
          data-id="{{item.id}}"
          disabled="{{!item.canAffordDamage}}"
          style="flex: 1; font-size: 20rpx; padding: 5rpx;">
          å‡çº§æ”»å‡»åŠ› ({{item.damageCostText}})
        </button>
        
        <button 
          class="pixel-button small {{item.canAffordInterval ? '' : 'disabled'}}" 
          bindtap="onUpgradeInterval" 
          data-id="{{item.id}}"
          disabled="{{!item.canAffordInterval}}"
          style="flex: 1; font-size: 20rpx; padding: 5rpx;">
          å‡çº§æ”»é€Ÿ ({{item.intervalCostText}})
        </button>
      </view>
    </view>
  </view>
  
  <view wx:if="{{mercenaries.length === 0}}" class="empty-state">
    <text>æš‚æ— ä½£å…µæ•°æ®</text>
  </view>
</view>
